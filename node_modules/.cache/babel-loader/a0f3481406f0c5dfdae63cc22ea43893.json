{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\IJuanchoG\\\\Desktop\\\\Twilio\\\\src\\\\App.js\";\nimport './App.scss';\nimport React, { Component } from 'react';\nimport Select from 'react-select';\nimport Room from './Room';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst {\n  connect\n} = require('twilio-video');\n\nconst mystyle = {\n  padding: 5\n};\nconst options = [{\n  value: 'spanish',\n  label: 'Spanish'\n}, {\n  value: 'english',\n  label: 'English'\n}, {\n  value: 'german',\n  label: 'German'\n}];\nvar hasAudio = false;\nvar hasVideo = false;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = selectedOption => {\n      this.setState({\n        selectedOption\n      });\n    };\n\n    this.state = {\n      identity: '',\n      selectedOption: null,\n      room: null\n    };\n    this.inputRef = /*#__PURE__*/React.createRef();\n    this.joinRoom = this.joinRoom.bind(this);\n    this.returnToLobby = this.returnToLobby.bind(this);\n    this.updateIdentity = this.updateIdentity.bind(this);\n    this.removePlaceholderText = this.removePlaceholderText.bind(this);\n    this.gotDevices = this.gotDevices.bind(this);\n    navigator.mediaDevices.enumerateDevices().then(this.gotDevices);\n  }\n\n  async joinRoom() {\n    if (this.state.selectedOption !== null) {\n      try {\n        const response = await fetch(`https://ice2meetubackend.azurewebsites.net/getTwilioToken?identity=${this.state.identity}&room=${this.state.selectedOption.value}`);\n        const data = await response.json();\n        const room = await connect(data.token, {\n          name: this.state.selectedOption.value,\n          audio: hasAudio,\n          video: hasVideo\n        });\n        this.setState({\n          room: room\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    } else {\n      alert(\"No ha seleccionado ninguna sala!\");\n    }\n  }\n\n  gotDevices(deviceInfos) {\n    for (var i = 0; i !== deviceInfos.length; ++i) {\n      var deviceInfo = deviceInfos[i];\n\n      if (deviceInfo.kind === 'videoinput') {\n        hasVideo = true;\n      }\n\n      if (deviceInfo.kind === 'audioinput') {\n        hasAudio = true;\n      }\n    }\n  }\n\n  returnToLobby() {\n    this.setState({\n      room: null\n    });\n  }\n\n  removePlaceholderText() {\n    this.inputRef.current.placeholder = '';\n  }\n\n  updateIdentity(event) {\n    this.setState({\n      identity: event.target.value\n    });\n  }\n\n  render() {\n    const disabled = this.state.identity === '' ? true : false;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      children: this.state.room === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lobby\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          value: this.state.identity,\n          onChange: this.updateIdentity,\n          ref: this.inputRef,\n          onClick: this.removePlaceholderText,\n          placeholder: \"What's your name?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: this.state.selectedOption,\n          onChange: this.handleChange,\n          options: options\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: mystyle,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: disabled,\n            onClick: this.joinRoom,\n            children: \"Join Room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 27\n      }, this) : /*#__PURE__*/_jsxDEV(Room, {\n        returnToLobby: this.returnToLobby,\n        room: this.state.room\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 27\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/IJuanchoG/Desktop/Twilio/src/App.js"],"names":["React","Component","Select","Room","connect","require","mystyle","padding","options","value","label","hasAudio","hasVideo","App","constructor","props","handleChange","selectedOption","setState","state","identity","room","inputRef","createRef","joinRoom","bind","returnToLobby","updateIdentity","removePlaceholderText","gotDevices","navigator","mediaDevices","enumerateDevices","then","response","fetch","data","json","token","name","audio","video","err","console","log","alert","deviceInfos","i","length","deviceInfo","kind","current","placeholder","event","target","render","disabled"],"mappings":"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","sourcesContent":["import './App.scss';\r\nimport React, {Component} from 'react';\r\nimport Select from 'react-select';\r\nimport Room from './Room';\r\n\r\n\r\n\r\nconst { connect } = require('twilio-video');\r\nconst mystyle = {\r\n\r\n    padding: 5\r\n\r\n                                \r\n}\r\n\r\nconst options = [  \r\n  { value: 'spanish', label: 'Spanish' },\r\n  { value: 'english', label: 'English' },\r\n  { value: 'german', label: 'German' },\r\n];\r\nvar hasAudio = false;\r\nvar hasVideo = false;\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        \r\n        this.state = {\r\n            identity: '',\r\n            selectedOption: null,\r\n            room: null\r\n        }\r\n        this.inputRef = React.createRef();\r\n        this.joinRoom = this.joinRoom.bind(this);\r\n        this.returnToLobby = this.returnToLobby.bind(this);\r\n        this.updateIdentity = this.updateIdentity.bind(this);\r\n        this.removePlaceholderText = this.removePlaceholderText.bind(this);\r\n\r\n        this.gotDevices = this.gotDevices.bind(this);\r\n        navigator.mediaDevices.enumerateDevices().then(this.gotDevices);\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    handleChange = selectedOption => {\r\n        this.setState({ selectedOption });\r\n        \r\n\r\n    };\r\n\r\n    async joinRoom() {\r\n\r\n        if (this.state.selectedOption!==null){\r\n            try {\r\n\r\n            const response = await fetch(`https://ice2meetubackend.azurewebsites.net/getTwilioToken?identity=${this.state.identity}&room=${this.state.selectedOption.value}`);\r\n\r\n            const data = await response.json();\r\n            \r\n            const room = await connect(data.token, {\r\n                name: this.state.selectedOption.value,\r\n                audio: hasAudio,\r\n                video: hasVideo\r\n            });\r\n\r\n            this.setState({ room: room });\r\n        }\r\n\r\n            catch(err) {\r\n                console.log(err);\r\n            }\r\n        }\r\n        else{\r\n            alert(\"No ha seleccionado ninguna sala!\");\r\n        }\r\n        \r\n    }\r\n\r\n    gotDevices(deviceInfos) {\r\n\r\n\r\n        for (var i = 0; i !== deviceInfos.length; ++i) {\r\n          var deviceInfo = deviceInfos[i];\r\n          if (deviceInfo.kind === 'videoinput') {\r\n            hasVideo=true;\r\n          }\r\n          if (deviceInfo.kind === 'audioinput') {\r\n            hasAudio=true;\r\n          }\r\n        }\r\n      }\r\n\r\n\r\n\r\n\r\n    returnToLobby() {\r\n        this.setState({ room: null });\r\n    }\r\n\r\n\r\n    removePlaceholderText() {\r\n        this.inputRef.current.placeholder = '';\r\n\r\n    }\r\n\r\n\r\n    updateIdentity(event) {\r\n        this.setState({\r\n            identity: event.target.value\r\n        });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        const disabled = this.state.identity === '' ? true : false;\r\n        \r\n           \r\n        return (\r\n\r\n            <div className=\"app\">\r\n                {\r\n                    this.state.room === null\r\n                        ? <div className=\"lobby\">\r\n                            <input\r\n                                value={this.state.identity}\r\n                                onChange={this.updateIdentity}\r\n                                ref={this.inputRef}\r\n                                onClick={this.removePlaceholderText}\r\n                                placeholder=\"What's your name?\"/>\r\n                            <Select\r\n                                value={this.state.selectedOption}\r\n                                onChange={this.handleChange}\r\n                                options={options}\r\n                              />\r\n                            \r\n                            <div style={mystyle} >\r\n                                <button disabled={disabled} onClick={this.joinRoom}>Join Room</button>\r\n                                \r\n                            </div>\r\n                            \r\n                              \r\n                            \r\n                        </div>\r\n\r\n                        : <Room returnToLobby={this.returnToLobby} room={this.state.room} />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}